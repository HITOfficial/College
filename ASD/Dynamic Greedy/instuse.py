# complexity:
# - time O(NlogN)
# - space O(N)


def binary_intervals(I, n, visited, in_intervals, actual_intervals, l, r, pivot, y):
    # full interval
    if l <= r:
        m = (r+l)//2
        # full interval, or interval form m had previosly made full connection path to Y
        if pivot == y or (in_intervals[m] and pivot == I[m][0]):
            for idx in actual_intervals:
                in_intervals[idx] = True
            return
        # found connections
        if I[m][0] == pivot:
            if visited[m] is False:
                visited[m] = True
                binary_intervals(I, n, visited, in_intervals,
                                 actual_intervals[:]+[m], min(m+1, n-1), n-1, I[m][1], y)
            # left side elements equal to pivot
            binary_intervals(I, n, visited, in_intervals,
                             actual_intervals, l, m-1, pivot, y)
            # right side elements equal to pivot
            binary_intervals(I, n, visited, in_intervals,
                             actual_intervals, m+1, r, pivot, y)
        # searching in left side in binary search
        elif I[m][0] > pivot:
            binary_intervals(I, n, visited, in_intervals,
                             actual_intervals, l, m-1, pivot, y)
        else:
            binary_intervals(I, n, visited, in_intervals,
                             actual_intervals, m+1, r, pivot, y)


def instuse(I, x, y):
    n = len(I)
    I = [(*tpl, idx) for tpl, idx in zip(I, range(n))]
    I.sort()
    visited = [False]*n
    in_intervals = [False]*n
    binary_intervals(I, n, visited, in_intervals, [], 0, n-1, x, y)
    intervals_indexes = []
    for i in range(n):
        if in_intervals[i]:
            intervals_indexes.append(I[i][2])
    return intervals_indexes


I = [(100, 102), (102, 114), (101, 107), (96, 102), (98, 118), (102, 113), (96, 112), (102, 104), (98, 118), (102, 114), (99, 118), (107, 122), (100, 111), (105, 120), (99, 113), (106, 117), (108, 122), (105, 117), (106, 123), (104, 113), (105, 117), (104, 110), (109, 111), (107, 114), (104, 121), (102, 116), (105, 119), (105, 113), (106, 113), (108, 124), (103, 123), (103, 112), (106, 120), (111, 121), (104, 114), (108, 128), (112, 132), (107, 125), (106, 121), (104, 121), (106, 115), (112, 123), (111, 113), (107, 116), (105, 125), (111, 129), (112, 123), (110, 125), (109, 126), (108, 125), (106, 120), (109, 122), (110, 123), (106, 123), (113, 133), (109, 124), (106, 110), (106, 116), (108, 119), (107, 121), (108, 114), (112, 128), (115, 125), (108, 123), (116, 121), (118, 131), (117, 121), (115, 119), (116, 120), (114, 131), (110, 127), (115, 133), (119, 139), (110, 121), (110, 123), (111, 114), (113, 129), (111, 129), (116, 136), (110, 127), (120, 135), (113, 116), (113, 119), (112, 121), (115, 125), (120, 139), (113, 131), (120, 136), (116, 122), (117, 125), (116, 136), (116, 130), (122, 127), (120, 137), (122, 136), (120, 134), (117, 134), (114, 129), (119, 133), (115, 131), (119, 123), (123, 138), (117, 135), (121, 141), (124, 137), (117, 123), (126, 134), (126, 137), (123, 136), (124, 126), (124, 131), (127, 138), (117, 132), (127, 143), (127, 129), (118, 129), (122, 130), (124, 131), (121, 136), (125, 134), (127, 137), (124, 132), (127, 143), (127, 130), (124, 129), (123, 126), (125, 131), (122, 126), (121, 124), (126, 133), (126, 128), (123, 139), (130, 134), (123, 134), (131, 148), (124, 127), (122, 140), (127, 130), (127, 134), (128, 143), (128, 134), (130, 146), (126, 130), (127, 147), (125, 135), (131, 144), (134, 136), (127, 142), (124, 143), (129, 143), (130, 132), (125, 131), (133, 147), (128, 143), (131, 143), (130, 148), (132, 136), (131, 136), (128, 144), (135, 154), (133, 142), (136, 154), (130, 147), (137, 146), (127, 133), (131, 144), (133, 147), (138, 153), (135, 153), (138, 151), (133, 151), (134, 136), (130, 132), (130, 133), (139, 156), (133, 148), (140, 144), (132, 143), (133, 142), (138, 140), (137, 141), (135, 151), (141, 159), (138, 144), (139, 142), (140, 155), (138, 152), (133, 146), (138, 145), (138, 155), (138, 158), (141, 151), (143, 163), (137, 151), (142, 147), (142, 152), (141, 154), (139, 156), (144, 157), (139, 144), (136, 146), (143, 149), (140, 159), (139, 157), (141, 160), (138, 154), (136, 139), (141, 156), (141, 144), (144, 154), (145, 151), (145, 163), (145, 151), (138, 142), (139, 159), (142, 153), (144, 159), (145, 148), (140, 158), (146, 149), (146, 150), (143, 148), (145, 161), (141, 150), (142, 161), (150, 165), (142, 149), (150, 153), (150, 165), (145, 147), (151, 163), (141, 156), (142, 162), (149, 153), (145, 159), (142, 157), (149, 165), (149, 152), (146, 149), (150, 163), (151, 165), (148, 165), (144, 146), (151, 154), (153, 162), (144, 155), (153, 160), (145, 151), (144, 158), (152, 157), (154, 172), (145, 148), (148, 164), (148, 154), (146, 162), (151, 153), (150, 156), (149, 152), (150, 169), (152, 158), (148, 164), (153, 161), (155, 171), (152, 155), (156, 163), (154, 158), (152, 163), (158, 166), (158, 175), (158, 167), (150, 154), (158, 164), (152, 171), (151, 161), (151, 160), (160, 173), (152, 167), (157, 177), (152, 157), (159, 173), (160, 171), (156, 165), (161, 163), (156, 176), (159, 166), (157, 176), (157, 174), (158, 164), (153, 163), (155, 174), (153, 156), (162, 177), (154, 157), (153, 161), (159, 167), (163, 167), (159, 174), (156, 172), (160, 170), (164, 168), (160, 174), (165, 182), (160, 172), (159, 165), (165, 184), (161, 180), (158, 173), (158, 178), (162, 169), (165, 170), (160, 177), (164, 166), (158, 167), (158, 161), (167, 178), (161, 179), (159, 173), (165, 170), (158, 164), (168, 182), (169, 177), (166, 179), (166, 170), (160, 163), (163, 171), (166, 168), (160, 162), (164, 175), (161, 173), (170, 190), (170, 178), (170, 184), (166, 185), (161, 178), (165, 180), (165, 179), (172, 184), (163, 177), (172, 175), (171, 174), (168, 171), (166, 178), (170, 181), (166, 181), (163, 165), (167, 186), (166, 184), (168, 179), (172, 175), (166, 175), (174, 188), (175, 193), (165, 172), (172, 189), (173, 186), (172, 177), (169, 182), (173, 187), (166, 180), (173, 193), (170, 179), (176, 193), (168, 172), (171, 189), (177, 187), (173, 193), (169, 178), (169, 185), (177, 194), (176, 190), (177, 179), (170, 183), (170, 179), (178, 196), (172, 174), (177, 184), (175, 194), (177, 184), (171, 191), (178, 194), (171, 174), (180, 190), (177, 180), (173, 193), (178, 180), (178, 185), (177, 188), (179, 191), (182, 200), (178, 197), (179, 187), (176, 191), (181, 183), (177, 188), (181, 190), (179, 185), (180, 186), (182, 184), (182, 200), (174, 177), (184, 190), (177, 189), (176, 190), (175, 187), (181, 188), (178, 188), (184, 190), (178, 180), (176, 181), (185, 197), (187, 194), (178, 188), (177, 196), (186, 197), (180, 192), (179, 186), (188, 204), (184, 190), (184, 195), (182, 188), (181, 191), (186, 200), (179, 186), (180, 188), (187, 203), (189, 209), (187, 196), (186, 199), (184, 186), (188, 203), (189, 192), (185, 197), (182, 200), (190, 210), (190, 204), (191, 205), (192, 203), (187, 192), (183, 199), (189, 197), (193, 206), (193, 209), (188, 193), (184, 188), (189, 204), (185, 188), (191, 211), (187, 206), (184, 194), (194, 206), (187, 199), (194, 207), (193, 202), (192, 194), (191, 203), (196, 207), (192, 194), (186, 198), (193, 197), (194, 201), (187, 190), (191, 207), (197, 201), (194, 211), (193, 195), (197, 199), (188, 192), (192, 205), (195, 215), (194, 208), (189, 197), (193, 199), (193, 202), (196, 216), (196, 200), (197, 215), (194, 206), (199, 212), (194, 196), (199, 219), (195, 202), (195, 197), (197, 199), (195, 209), (194, 201), (197, 214), (193, 198), (200, 213), (200, 217), (199, 201), (198, 213), (202, 207), (195, 210), (197, 205), (196, 204), (195, 203), (200, 209), (198, 208), (194, 207), (194, 208), (196, 212), (200, 220), (203, 216),
     (204, 207), (199, 204), (200, 202), (198, 207), (202, 207), (199, 206), (197, 217), (200, 220), (202, 212), (202, 214), (198, 209), (197, 214), (206, 226), (200, 210), (208, 223), (207, 222), (199, 216), (207, 225), (209, 214), (201, 204), (204, 221), (200, 215), (209, 226), (210, 221), (205, 221), (205, 222), (202, 221), (208, 212), (202, 216), (210, 223), (205, 211), (203, 209), (204, 218), (208, 228), (205, 207), (207, 219), (210, 228), (205, 220), (210, 212), (206, 213), (206, 221), (212, 221), (209, 211), (212, 220), (204, 217), (212, 216), (212, 232), (212, 218), (215, 226), (205, 212), (214, 220), (205, 222), (208, 222), (211, 216), (209, 217), (213, 227), (210, 219), (216, 225), (217, 226), (211, 218), (212, 231), (216, 233), (212, 226), (216, 219), (217, 229), (216, 224), (211, 219), (214, 221), (214, 224), (216, 235), (209, 214), (213, 232), (211, 224), (211, 218), (211, 222), (213, 226), (220, 231), (221, 235), (211, 221), (219, 235), (219, 239), (216, 235), (216, 220), (216, 219), (221, 226), (214, 231), (216, 219), (214, 216), (216, 233), (215, 230), (220, 233), (221, 225), (214, 232), (217, 226), (224, 231), (224, 231), (224, 232), (217, 224), (221, 236), (224, 238), (220, 223), (222, 232), (218, 222), (221, 235), (218, 228), (224, 241), (218, 220), (221, 238), (219, 232), (221, 241), (227, 231), (218, 236), (222, 234), (220, 224), (227, 241), (225, 241), (228, 248), (221, 241), (229, 243), (228, 245), (219, 232), (228, 243), (223, 225), (220, 229), (226, 236), (226, 230), (228, 248), (221, 223), (231, 250), (228, 233), (230, 237), (226, 246), (228, 234), (225, 228), (223, 236), (230, 243), (224, 229), (224, 235), (231, 238), (231, 236), (228, 230), (227, 232), (230, 232), (234, 236), (226, 232), (231, 242), (233, 247), (230, 240), (234, 238), (232, 251), (233, 236), (234, 241), (231, 240), (235, 238), (228, 245), (227, 237), (229, 235), (236, 254), (230, 240), (230, 239), (236, 249), (237, 250), (229, 241), (230, 248), (233, 236), (228, 243), (236, 240), (236, 238), (230, 246), (237, 256), (231, 239), (231, 240), (240, 252), (236, 246), (237, 240), (232, 251), (237, 249), (238, 258), (236, 248), (238, 246), (239, 249), (235, 254), (234, 244), (240, 257), (239, 247), (240, 245), (241, 249), (238, 254), (240, 242), (242, 259), (234, 237), (240, 260), (244, 252), (243, 251), (241, 261), (237, 240), (239, 241), (240, 255), (241, 246), (245, 256), (242, 259), (240, 249), (238, 244), (244, 251), (238, 248), (236, 253), (238, 249), (242, 249), (240, 256), (245, 259), (240, 257), (239, 256), (241, 252), (240, 251), (239, 242), (239, 251), (240, 251), (240, 255), (248, 261), (247, 266), (243, 248), (242, 254), (241, 253), (248, 259), (245, 252), (243, 251), (246, 255), (245, 256), (245, 249), (246, 250), (249, 264), (247, 267), (248, 258), (247, 255), (242, 246), (242, 247), (243, 253), (249, 261), (244, 261), (245, 254), (250, 265), (245, 261), (247, 267), (247, 258), (250, 270), (244, 261), (253, 267), (251, 270), (248, 252), (253, 257), (254, 273), (245, 263), (248, 261), (246, 263), (254, 258), (248, 254), (256, 264), (248, 267), (248, 259), (253, 268), (247, 256), (253, 273), (249, 268), (257, 270), (253, 270), (256, 269), (256, 263), (256, 268), (255, 257), (253, 264), (255, 258), (254, 274), (254, 269), (252, 269), (255, 274), (256, 270), (258, 272), (256, 274), (258, 261), (260, 265), (253, 272), (254, 269), (259, 273), (262, 276), (261, 272), (258, 276), (262, 264), (256, 273), (261, 265), (261, 277), (261, 267), (261, 281), (254, 267), (260, 277), (264, 279), (261, 265), (255, 262), (257, 262), (255, 258), (258, 276), (262, 275), (259, 272), (257, 268), (263, 277), (263, 273), (263, 279), (265, 276), (259, 270), (260, 278), (262, 272), (257, 265), (264, 281), (259, 272), (259, 274), (263, 266), (260, 263), (265, 271), (269, 283), (265, 280), (266, 283), (267, 280), (263, 266), (264, 271), (260, 270), (270, 273), (263, 271), (262, 272), (271, 281), (263, 280), (267, 283), (263, 273), (267, 275), (267, 269), (264, 276), (267, 270), (272, 279), (270, 274), (270, 276), (267, 275), (269, 272), (271, 289), (272, 288), (274, 286), (264, 282), (264, 273), (266, 268), (266, 276), (272, 283), (273, 286), (269, 280), (275, 295), (266, 285), (266, 277), (268, 280), (273, 286), (275, 293), (273, 278), (273, 293), (270, 280), (274, 293), (272, 285), (275, 285), (270, 289), (278, 285), (268, 274), (273, 290), (275, 293), (278, 281), (277, 284), (273, 279), (279, 299), (269, 278), (272, 276), (278, 284), (280, 294), (274, 291), (276, 291), (279, 297), (280, 290), (281, 296), (280, 287), (279, 299), (273, 285), (274, 293), (276, 285), (281, 298), (279, 298), (274, 278), (278, 280), (278, 283), (281, 286), (274, 281), (275, 283), (281, 292), (278, 286), (281, 287), (282, 285), (279, 286), (282, 297), (284, 303), (279, 293), (276, 282), (278, 297), (278, 282), (277, 281), (276, 283), (282, 296), (277, 294), (280, 290), (284, 295), (287, 302), (281, 290), (278, 297), (283, 303), (278, 282), (287, 303), (281, 294), (289, 306), (281, 294), (286, 293), (283, 302), (280, 291), (284, 295), (287, 291), (280, 299), (288, 306), (285, 288), (284, 298), (290, 302), (284, 294), (288, 306), (288, 305), (284, 288), (284, 288), (286, 300), (287, 295), (284, 300), (287, 290), (292, 295), (284, 288), (290, 294), (288, 294), (294, 311), (290, 299), (291, 298), (289, 294), (288, 296), (295, 306), (292, 312), (294, 308), (290, 303), (291, 295), (287, 297), (291, 294), (292, 308), (289, 298), (296, 302), (291, 308), (292, 296), (290, 298), (291, 303), (287, 299), (293, 309), (292, 307), (297, 299), (296, 315), (291, 297), (293, 298), (298, 316), (289, 303), (291, 298), (291, 302), (295, 301), (296, 309), (291, 299), (294, 302), (291, 306), (294, 299), (301, 315), (291, 306), (293, 305), (293, 307), (302, 307), (295, 311), (297, 299), (297, 309), (298, 306), (300, 305), (299, 303), (293, 311), (297, 300), (298, 311), (300, 316), (294, 309), (298, 310), (300, 316), (296, 300), (303, 315), (295, 305), (302, 311), (301, 309), (302, 320)]
x, y = 100, 300

print(instuse(I, x, y))
